ktor {
  application {
    modules = [ com.yourcompany.zeiterfassung.ApplicationKt.module ]
  }

  deployment {
    port = 8080
    port = ${?PORT}
  }

  database {
    url             = "jdbc:postgresql://localhost:5432/attendance"
    driver          = "org.postgresql.Driver"
    user            = "yuliyanatasheva"
    password        = "SOLGANn47@25"
    maximumPoolSize = 10
    # --- overrides for Koyeb/Neon via env ---
    url = ${?JDBC_DATABASE_URL}
    user = ${?DB_USER}
    password = ${?DB_PASSWORD}
    maximumPoolSize = ${?DB_MAX_POOL}
  }

  jwt {
    secret     = "HZfigEj52tw8ObMaGYbPZ+R2q0ds+qi0C584PfP7HDo="
    issuer     = "com.yourcompany.zeiterfassung"
    audience   = "zeiterfassung-client"
    realm      = "zeiterfassung"
    validityMs = 3600000
    # --- allow overriding via env in prod ---
    secret   = ${?JWT_SECRET}
    issuer   = ${?JWT_ISSUER}
    audience = ${?JWT_AUDIENCE}
    realm    = ${?JWT_REALM}
  }
}

twilio {
  accountSid = ${?TWILIO_SID}
  authToken  = ${?TWILIO_TOKEN}
  fromNumber = "+12184004491"
}

cache {
  verificationCode {
    expireMinutes = 5
  }
}
